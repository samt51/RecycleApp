@using Fire.UI.Models.AllViewModels
@model AllLayoutViewModel
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}



<head>
    <style>
        .whiteColor {
            color: white !important;
        }
    </style>
</head>




<div class="main-panel">
    <div class="content-wrapper">
        <div class="row">
            <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-9">
                                <div class="d-flex align-items-center align-self-start">
                                    <h3 class="mb-0" id="GetDailySumKg">@Model.DashboardViewModel.GetDailySumKg</h3>
                                    <!-- <p class="text-success ml-2 mb-0 font-weight-medium">+3.5%</p> -->
                                </div>
                            </div>

                        </div>
                        <h6 class="text-muted font-weight-normal">Günlük Giren Toplam Kg</h6>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-9">
                                <div class="d-flex align-items-center align-self-start">
                                    <h3 class="mb-0" id="GiveDailySumKg">@Model.DashboardViewModel.GiveDailySumKg</h3>
                                    <!-- <p class="text-success ml-2 mb-0 font-weight-medium">+11%</p> -->
                                </div>
                            </div>
                            @*       <div class="col-3">
                            <div class="icon icon-box-success">
                            <span class="mdi mdi-arrow-top-right icon-item"></span>
                            </div>
                            </div>*@
                        </div>
                        <h6 class="text-muted font-weight-normal">Günlük Çıkan Toplam Kg</h6>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-9">
                                <div class="d-flex align-items-center align-self-start">
                                    <h3 class="mb-0" id="DailyEarning">@Model.DashboardViewModel.DailyEarning</h3>

                                </div>
                            </div>
                            @* <div class="col-3">
                            <div class="icon icon-box-danger">
                            <span class="mdi mdi-arrow-bottom-left icon-item"></span>
                            </div>
                            </div>*@
                        </div>
                        <h6 class="text-muted font-weight-normal">Günlük Kazanç </h6>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-9">
                                <div class="d-flex align-items-center align-self-start">
                                    <h3 class="mb-0" id="GiveDailyPrice">@Model.DashboardViewModel.GiveDailyPrice</h3>

                                </div>
                            </div>
                            @*  <div class="col-3">
                            <div class="icon icon-box-success ">
                            <span class="mdi mdi-arrow-top-right icon-item"></span>
                            </div>
                            </div>*@
                        </div>
                        <h6 class="text-muted font-weight-normal">Günlük Sermaye Toplam Ücret</h6>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex flex-row justify-content-between">
                            <h4 class="card-title mb-1">Toplam Stok</h4>
                            <p class="text-muted mb-1 whiteColor" id="totalstock">@ViewBag.stock</p>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <div class="preview-list">
                                    @* @foreach (var item in Model.DashboardViewModel.StockResponse)
                                    {
                                    <div class="preview-item border-bottom">
                                    <div class="preview-thumbnail">
                                    <div class="preview-icon bg-primary">
                                    <i class="mdi mdi-file-document"></i>
                                    </div>
                                    </div>
                                    <div class="preview-item-content d-sm-flex flex-grow">
                                    <div class="flex-grow">
                                    <h6 class="preview-subject">@item.ProductName</h6>

                                    </div>
                                    <div class="mr-auto text-sm-right pt-2 pt-sm-0">
                                    <p class="text-muted">@item.TotalKg</p> Kg
                                    </div>
                                    </div>
                                    </div>
                                    }*@

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-8 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex flex-row justify-content-between">
                            <h4 class="card-title mb-1">En Çok Satılan Mallar</h4>
                            <p class="text-muted mb-1">Kg</p>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <div class="preview-list">

                                    @foreach (var item in Model.DashboardViewModel.TopSellingGoods)
                                    {
                                        <div class="preview-item">
                                            <div class="preview-thumbnail">
                                                <div class="preview-icon bg-warning">
                                                    <i class="mdi mdi-chart-pie"></i>
                                                </div>
                                            </div>
                                            <div class="preview-item-content d-sm-flex flex-grow">
                                                <div class="flex-grow">
                                                    <h6 class="preview-subject">@item.Name</h6>
                                                    <p class="text-muted mb-0"></p>
                                                </div>
                                                <div class="mr-auto text-sm-right pt-2 pt-sm-0">
                                                    <p class="text-muted deneme whiteColor">@item.Price</p>
                                                    <p class="text-muted mb-0">@*27 tasks, 4 issues*@ </p>
                                                </div>
                                            </div>
                                        </div>
                                    }

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4 grid-margin">
                <div class="card">
                    <div class="card-body">
                        <h5>Günlük En Fazla Stok Arttıran Ürün</h5>
                        <div class="row">
                            <div class="col-8 col-sm-12 col-xl-8 my-auto">
                                <div class="d-flex d-sm-block d-md-flex align-items-center">
                                    <h2 class="mb-0" id="StockBoosterProduct">@Model.DashboardViewModel.StockBoosterProduct</h2>
                                    <p class="text-success ml-2 mb-0 font-weight-medium"></p>
                                </div>
                                <h6 class="text-muted font-weight-normal">@Model.DashboardViewModel.StockBoosterProductName</h6>
                            </div>
                            <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                                <i class="icon-lg mdi mdi-codepen text-primary ml-auto"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-4 grid-margin">
                <div class="card">
                    <div class="card-body">
                        <h5>Günlük En Fazla Stoktan Eksilen Ürün</h5>
                        <div class="row">
                            <div class="col-8 col-sm-12 col-xl-8 my-auto">
                                <div class="d-flex d-sm-block d-md-flex align-items-center">
                                    <h2 class="mb-0" id="StockMostProduck">@Model.DashboardViewModel.StockMostProduck</h2>
                                    <p class="text-success ml-2 mb-0 font-weight-medium"></p>
                                </div>
                                <h6 class="text-muted font-weight-normal">@Model.DashboardViewModel.StockMostProduckName </h6>
                            </div>
                            <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                                <i class="icon-lg mdi mdi-wallet-travel text-danger ml-auto"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-4 grid-margin">
                <div class="card">
                    <div class="card-body">
                        <h5>Günlük En Fazla Alım Yapılan Müş.</h5>
                        <div class="row">
                            <div class="col-8 col-sm-12 col-xl-8 my-auto">
                                <div class="d-flex d-sm-block d-md-flex align-items-center">
                                    <h2 class="mb-0" id="GetDailyProductByCustomerKg">@Model.DashboardViewModel.GetDailyProductByCustomerKg</h2>
                                    <p class="text-danger ml-2 mb-0 font-weight-medium"> </p>
                                </div>
                                <h6 class="text-muted font-weight-normal">@Model.DashboardViewModel.GetDailyProductByCustomerName</h6>
                            </div>
                            <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                                <i class="icon-lg mdi mdi-monitor text-success ml-auto"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row ">
            <div class="col-12 grid-margin">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">En Çok Satış Yapılan Firmalar</h4>
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th> </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in @Model.DashboardViewModel.TopSellingCompanies)
                                    {
                                        <tr>
                                            <td class="whiteColor">@item.name </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">En Çok Alım Yapılan Müşteriler</h4>
                        <div class="row">
                            <div class="col-md-5">
                                <div class="table-responsive">
                                    <table class="table">
                                        <tbody>
                                            @foreach (var item in @Model.DashboardViewModel.TopPurchasedCustomers)
                                            {
                                                <tr>
                                                    <td class="whiteColor">@String.Concat(@item.Name," ", @item.Surname)</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-7">
                                <div id="audience-map" class="vector-map"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
        <div class="d-sm-flex justify-content-center justify-content-sm-between">
            <span class="text-muted d-block text-center text-sm-left d-sm-inline-block">Tüm Haklar Saklıdır. © 2023</span>
            <!-- <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">  <a href="https://www.bootstrapdash.com/bootstrap-admin-template/" target="_blank">Bootstrap admin templates</a> from Bootstrapdash.com</span> -->
        </div>
    </footer>
</div>


<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/snippets/javascript.min.js"></script>
<script src="/lib/jquery/dist/jquery.min.js"></script>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>


<script>

    var GetDailySumKg = document.getElementById('GetDailySumKg').innerHTML;

    document.getElementById('GetDailySumKg').innerHTML = formatMyMoney(GetDailySumKg);

    var GiveDailySumKg = document.getElementById('GiveDailySumKg').innerHTML;

    document.getElementById('GiveDailySumKg').innerHTML = formatMyMoney(GiveDailySumKg);

    var DailyEarning = document.getElementById('DailyEarning').innerHTML;

    document.getElementById('DailyEarning').innerHTML = formatMyMoney(DailyEarning) + " " + "₺";

    var GiveDailyPrice = document.getElementById('GiveDailyPrice').innerHTML;

    document.getElementById('GiveDailyPrice').innerHTML = formatMyMoney(GiveDailyPrice) + " " + "₺";

    var StockBoosterProduct = document.getElementById('StockBoosterProduct').innerHTML;

    document.getElementById('StockBoosterProduct').innerHTML = formatMyMoney(StockBoosterProduct);

    var StockMostProduck = document.getElementById('StockMostProduck').innerHTML;

    document.getElementById('StockMostProduck').innerHTML = formatMyMoney(StockMostProduck);

    var GetDailyProductByCustomerKg = document.getElementById('GetDailyProductByCustomerKg').innerHTML;

    document.getElementById('GetDailyProductByCustomerKg').innerHTML = formatMyMoney(GetDailyProductByCustomerKg);

    var totalstock = document.getElementById('totalstock').innerHTML;

    document.getElementById('totalstock').innerHTML = formatMyMoney(totalstock);


    var deneme = document.getElementsByClassName("deneme");


    for (var j = 0; j < deneme.length; j++) {
        deneme[j].innerHTML = formatMyMoney(deneme[j].innerHTML);
    }





    function formatMyMoney(price) {

        var currency_symbol = "₺"

        var formattedOutput = new Intl.NumberFormat('tr-TR', {
            style: 'currency',
            currency: 'TRY',
            minimumFractionDigits: 2,
        });

        return formattedOutput.format(price).replace(currency_symbol, '')
    }

                                                                                                    //$(document).ready(function() {
                                                                                                    //    $.ajax({
                                                                                                    //        type: "POST",
                                                                                                    //        dataType: "json",
                                                                                                    //        contentType: "application/json",
                                                                                                    //        url: '/Dashboard/stockCount',
                                                                                                    //        success: function(result) {
                                                                                                    //            google.charts.load('current', {
                                                                                                    //                'packages': ['corechart']
                                                                                                    //            });
                                                                                                    //            google.charts.setOnLoadCallback(function() {
                                                                                                    //                drawChart(result);
                                                                                                    //            });
                                                                                                    //        }
                                                                                                    //    });
                                                                                                    //});

                                                                                                    //function drawChart(result) {
                                                                                                    //    var data = new google.visualization.DataTable();
                                                                                                    //    data.addColumn('string', 'Name');
                                                                                                    //    data.addColumn('number', 'Stoklar');
                                                                                                    //    var dataArray = [];

                                                                                                    //    $.each(result, function(i, obj) {
                                                                                                    //        dataArray.push([obj.ProductName, obj.TotalKg]);
                                                                                                    //    });
                                                                                                    //    data.addRows(dataArray);

                                                                                                    //    var columnChartOptions = {
                                                                                                    //        title: "Ürün - Stok Grafiği",
                                                                                                    //        width: 1000,
                                                                                                    //        height: 800,
                                                                                                    //        bar: { groupWidth: "20%" },
                                                                                                    //    };

                                                                                                    //    var columnChart = new google.visualization.PieChart(document
                                                                                                    //        .getElementById('Piechart_div'));

                                                                                                    //    columnChart.draw(data, columnChartOptions);
                                                                                                    //}
</script>
@*<script>



    $(document).ready(function() {

        $.ajax({
            type: 'POST',
            url: '/Dashboard/stockCount',
            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
            data: "",
            success: function(data) {


                var chart = new CanvasJS.Chart("chartContainer", {
                    theme: "light2", // "light1", "light2", "dark1", "dark2"
                    exportEnabled: true,
                    animationEnabled: true,
                    title: {
                        text: "Automotive Semiconductor Vendors 2015",
                        fontSize: 21
                    },
                    data: [{
                        type: "pie",
                        startAngle: 160,
                        toolTipContent: "<b>{ProductName}</b>: {TotalKg}%",
                        indexLabel: "{ProductName} - {TotalKg}%",
                        dataPoints: data
                    }]

                });
                chart.render();


            },
            error: function() {
                alert('Failed to receive the Data');
                console.log('Failed ');
            }
        })
    });
</script>
*@